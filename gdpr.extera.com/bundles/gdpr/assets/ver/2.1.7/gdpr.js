!function (f, y, d) { var h = f.EXTERA_GDPR_DEBUG, m = function () { var e; if (f.EXTERA_GDPR_DEBUG && f.console && f.console.log) { (e = Array.prototype.slice.call(arguments)).unshift("background-color:#6428B4;color:#fff;font-weight:bold"), e.unshift("%c[EXTERA|GDPR]"); try { f.console.log.apply(null, e) } catch (e) { f.console.log(Array.prototype.slice.call(arguments)) } } }, v = function (e, t, a) { e.attachEvent ? e.attachEvent("on" + t, a) : e.addEventListener(t, a, !1) }; Array.prototype.forEach || (Array.prototype.forEach = function (e, t) { "use strict"; var a, o; for (a = 0, o = this.length; a < o; ++a)a in this && e.call(t, this[a], a, this) }), f.NodeList && !NodeList.prototype.forEach && (NodeList.prototype.forEach = Array.prototype.forEach), v(f, "load", function () { var e = y.querySelectorAll("[data-extera-gdpr]"), a = f[d][0], o = a.u.match(/(https?:\/\/[^\/]*)/)[1], t = y.createElement("link"), n = y.createElement("div"), c = y.createElement("div"), l = y.createElement("span"), r = y.getElementsByTagName("head")[0], i = y.getElementsByTagName("body")[0], s = null, p = a.k, u = null; t.rel = "stylesheet", t.type = "text/css", t.media = "all", t.href = a.u.replace(/\.js$/, ".css"), r.appendChild(t), n.style.display = "none", n.className = d + "-Modal", c.className = d + "-Content", l.className = d + "-Close", l.innerHTML = "&times;", n.appendChild(c), c.appendChild(l), i.appendChild(n), e.forEach(function (e) { var t = e.getAttribute("data-extera-gdpr"); e.href = "#" + t, v(e, "click", function (e) { e.preventDefault(), s || ((s = y.createElement("iframe")).style.border = "none", s.style.margin = 0, s.style.height = "100%", s.style.width = "100%", c.appendChild(s)), s.src = o + "/" + [a.l, a.c, t].join("/"), n.style.display = "block" }) }), v(l, "click", function (e) { e.preventDefault(), n.style.display = "none" }), v(f, "click", function (e) { e.target === n && (e.preventDefault(), n.style.display = "none") }), v(y, "keyup", function (e) { 27 === (e.which || e.keyCode) && (n.style.display = "none") }), p && ((u = y.createElement("script")).type = "text/javascript", u.src = "https://cdn.iubenda.com/consent_solution/iubenda_cons.js", u.onload = function () { m("IUB-CNS caricato:", !!_iub && !!_iub.cons && !!_iub.cons.init, "API key:", p), _iub.cons.init({ api_key: p, logger: h ? "console" : "none", log_level: h ? "debug" : "none" }), e.forEach(function (e) { (function (e, t) { var a = []; if (e.parentNode.closest) for (; e = e.parentNode.closest(t);)a.push(e); else for (; e = e.parentNode;)e.matches && e.matches(t) && a.push(e); return a })(e, "form").forEach(function (l) { var n = ["email", "first_name", "last_name", "full_name"], e = n.concat(["privacy_policy_a", "privacy_policy_b", "privacy_policy_c"]), t = l.querySelectorAll("input[type='password']"); e.forEach(function (e) { var t, a = -1 < n.indexOf(e) ? "subject" : "preference"; if (!(t = l.querySelector("[data-cons-" + a + "='" + e + "']") || l.querySelector("[name='" + e + "']") || l.querySelector("[type='" + e + "']"))) { var o = l.querySelector("." + e); o && (t = o.querySelector("input,textarea,select")) } t && t.setAttribute("data-cons-" + a, e) }), t.forEach(function (e) { e.setAttribute("data-cons-exclude", "") }), v(l, "submit", function (e) { var t; m(this, e); var a = l.querySelector("[data-cons-subject='email']"), o = l.querySelector("[data-cons-preference='privacy_policy_a']"), n = !1; if (a) if (/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i.test(a.value)) if (o) { t = function (e) { var t, a, o, n, c = []; if ("object" == typeof e && "FORM" === e.nodeName) for (n = e.elements.length, t = 0; t < n; t++)if ((o = e.elements[t]).name && !o.disabled && "file" !== o.type && "reset" !== o.type && "submit" !== o.type && "button" !== o.type) if ("select-multiple" === o.type) for (n = e.elements[t].options.length, a = 0; a < n; a++)o.options[a].selected && (c[c.length] = { name: o.name, value: o.options[a].value }); else ("checkbox" !== o.type && "radio" !== o.type || o.checked) && (c[c.length] = { name: o.name, value: o.value }); return c }(l); for (var c = 0; c < t.length; c++)if (t[c].name === o.name) { switch (t[c].value) { case "": case "no": case "off": case "false": case "0": case 0: case null: case void 0: case NaN: return void m("❌ privacy_policy_a obbligatorio"); default: n = !0 }break } n ? _iub.cons.submit({ form: { selector: l }, writeOnLocalStorage: !0 }).success(function (e) { m("✅ Submit success", e) }).error(function (e) { m("❌ Submit error", e) }) : m("❌ privacy_policy_a obbligatorio non trovato") } else m("❌ data-cons-preference mancante: privacy_policy_a"); else m("❌ email obbligatorio"); else m("❌ data-cons-subject mancante: email") }) }) }) }, r.appendChild(u)) }) }(window, document, "ExteraGDPR");